#!/bin/sh
# build-info -- Generate header file containing build details
# $Id$

sys_name="`hostname`.`domainname`"
user_name="$LOGNAME"
host_type="$1"
version="$2"
major_version="$3"
minor_version="$4"
sawmilldir="$5"
lispdir="$6"
sawmillexecdir="$7"

build_date="`date +'%a %b %e %Y'`"
build_time="`date +'%T %Z'`"

cat >build.h <<EOF
/* build.h -- Definitions relating to the current build
   Automatically generated by build-info; DO NOT EDIT! */

#ifndef BUILD_H
#define BUILD_H

#define SAWMILL_MAJOR $major_version
#define SAWMILL_MINOR $minor_version
#define SAWMILL_VERSION "$version"

#define SAWMILL_DIR "$sawmilldir"
#define SAWMILL_LISPDIR "$lispdir"
#define SAWMILL_EXECDIR "$sawmillexecdir"

#define HOST_TYPE "$host_type"

#define BUILD_HOST "$sys_name"
#define BUILD_USER "$user_name"

#define BUILD_DATE "$build_date"
#define BUILD_TIME "$build_time"

#endif /* BUILD_H */
EOF
